import{r as f,u as P,j as m,b as at,C as yt,c as Mt}from"./r3f-BXkpiomb.js";import{j as K,F as st,k as H,l as xt,g as V,I as gt,m as N,D as Q,n as ct,e as T,M as W,o as dt,p as Y,q as tt,r as mt,s as wt,G as et,t as bt,u as jt,v as Rt,w as lt}from"./three-0sx8qPVi.js";import{g as v}from"./gsap-DDlvirwQ.js";import{r as J}from"./index-CuojV040.js";function zt({count:p=1200}){const n=f.useRef(null),r=f.useRef(null),i=f.useMemo(()=>{const d=new Float32Array(p*3);for(let s=0;s<p;s++)d[s*3]=(Math.random()-.5)*100,d[s*3+1]=30-Math.random()*450,d[s*3+2]=(Math.random()-.5)*50;return d},[p]),h=Math.floor(p*.08),y=f.useMemo(()=>{const d=new Float32Array(h*3);for(let s=0;s<h;s++)d[s*3]=(Math.random()-.5)*90,d[s*3+1]=25-Math.random()*430,d[s*3+2]=(Math.random()-.5)*45;return d},[h]);return P(d=>{const s=d.clock.elapsedTime;if(n.current&&(n.current.rotation.y=Math.sin(s*.008)*.006),r.current){const u=r.current.material;u.opacity=.6+Math.sin(s*.5)*.2}}),m.jsxs(m.Fragment,{children:[m.jsxs("points",{ref:n,children:[m.jsx("bufferGeometry",{children:m.jsx("bufferAttribute",{args:[i,3],attach:"attributes-position"})}),m.jsx("pointsMaterial",{color:"#ffffff",size:.1,transparent:!0,opacity:.55,sizeAttenuation:!0,depthWrite:!1})]}),m.jsxs("points",{ref:r,children:[m.jsx("bufferGeometry",{children:m.jsx("bufferAttribute",{args:[y,3],attach:"attributes-position"})}),m.jsx("pointsMaterial",{color:"#ffffff",size:.25,transparent:!0,opacity:.7,sizeAttenuation:!0,depthWrite:!1})]})]})}function At(){const p=f.useRef(null),n=f.useMemo(()=>{const i=[];for(let h=0;h<24;h++)i.push({x:(Math.random()-.5)*35,y:20-h*18-Math.random()*10,length:50+Math.random()*80,baseOpacity:.04+Math.random()*.08,speed:.08+Math.random()*.25,phase:Math.random()*Math.PI*2,z:(Math.random()-.5)*8,angle:0});for(let h=0;h<12;h++){const y=(Math.random()-.5)*.3;i.push({x:(Math.random()-.5)*40,y:10-Math.random()*400,length:40+Math.random()*60,baseOpacity:.02+Math.random()*.05,speed:.12+Math.random()*.2,phase:Math.random()*Math.PI*2,z:(Math.random()-.5)*12,angle:y})}return i},[]),r=f.useMemo(()=>n.map(i=>{const h=i.length/2,y=Math.sin(i.angle)*h,d=new Float32Array([i.x-y,i.y-h,i.z,i.x+y,i.y+h,i.z]),s=new K;return s.setAttribute("position",new st(d,3)),s}),[n]);return P(i=>{if(p.current){const h=i.clock.elapsedTime;p.current.children.forEach((y,d)=>{const s=n[d];if(s){const u=y.material,o=.3+Math.sin(h*s.speed+s.phase)*.5+Math.sin(h*s.speed*.7+s.phase*1.3)*.2;u.opacity=s.baseOpacity*Math.max(0,o)}})}}),m.jsx("group",{ref:p,children:r.map((i,h)=>m.jsx("lineSegments",{geometry:i,children:m.jsx("lineBasicMaterial",{color:"#ffffff",transparent:!0,opacity:n[h].baseOpacity,depthWrite:!1,blending:H})},h))})}function St({count:p=800}){const n=f.useRef(null),r=f.useRef(null),i=Math.floor(p*.06),h=f.useMemo(()=>{const u=new Float32Array(p*3);for(let o=0;o<p;o++)u[o*3]=(Math.random()-.5)*120,u[o*3+1]=30-Math.random()*450,u[o*3+2]=-5+(Math.random()-.5)*50;return u},[p]),y=f.useMemo(()=>{const u=new Float32Array(p);for(let o=0;o<p;o++)u[o]=.04+Math.random()*.12;return u},[p]),d=f.useMemo(()=>{const u=[];for(let o=0;o<i;o++)u.push({x:(Math.random()-.5)*100,y:20-Math.random()*420,z:-3+(Math.random()-.5)*30,size:.15+Math.random()*.35,rotSpeed:(Math.random()-.5)*.4,driftSpeed:.02+Math.random()*.06,driftPhase:Math.random()*Math.PI*2});return u},[i]),s=f.useMemo(()=>new xt,[]);return P(u=>{const o=u.clock.elapsedTime;n.current&&(n.current.rotation.y=Math.sin(o*.01)*.003),r.current&&(d.forEach((t,l)=>{const a=Math.sin(o*t.driftSpeed+t.driftPhase)*.3,w=Math.cos(o*t.driftSpeed*.7+t.driftPhase)*.2;s.position.set(t.x+a,t.y+w,t.z),s.rotation.set(o*t.rotSpeed*.5,o*t.rotSpeed,o*t.rotSpeed*.3),s.scale.setScalar(t.size),s.updateMatrix(),r.current.setMatrixAt(l,s.matrix)}),r.current.instanceMatrix.needsUpdate=!0)}),m.jsxs(m.Fragment,{children:[m.jsxs("points",{ref:n,children:[m.jsxs("bufferGeometry",{children:[m.jsx("bufferAttribute",{args:[h,3],attach:"attributes-position"}),m.jsx("bufferAttribute",{args:[y,1],attach:"attributes-size"})]}),m.jsx("pointsMaterial",{color:"#ffffff",size:.12,transparent:!0,opacity:.55,sizeAttenuation:!0,depthWrite:!1})]}),m.jsxs("instancedMesh",{ref:r,args:[void 0,void 0,i],frustumCulled:!1,children:[m.jsx("boxGeometry",{args:[1,1,1]}),m.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.65,depthWrite:!1})]})]})}function Ft({count:p=200}){const n=f.useRef(null),r=f.useMemo(()=>{const y=[];for(let d=0;d<p;d++)y.push(new V((Math.random()-.5)*60,25-Math.random()*420,-4+(Math.random()-.5)*20));return y},[p]),{geometries:i,lineData:h}=f.useMemo(()=>{const d=[],s=[];for(let u=0;u<r.length;u++)for(let o=u+1;o<r.length;o++){const t=r[u].distanceTo(r[o]);if(t<25){const l=new Float32Array([r[u].x,r[u].y,r[u].z,r[o].x,r[o].y,r[o].z]),a=new K;a.setAttribute("position",new st(l,3)),d.push(a);const w=(1-t/25)*.2;s.push({baseOpacity:w,speed:.1+Math.random()*.3,phase:Math.random()*Math.PI*2})}}return{geometries:d,lineData:s}},[r]);return P(y=>{if(!n.current)return;const d=y.clock.elapsedTime;n.current.children.forEach((s,u)=>{const o=h[u];if(!o)return;const t=s.material,l=.5+Math.sin(d*o.speed+o.phase)*.5;t.opacity=o.baseOpacity*l})}),m.jsx("group",{ref:n,children:i.map((y,d)=>m.jsx("lineSegments",{geometry:y,children:m.jsx("lineBasicMaterial",{color:"#ffffff",transparent:!0,opacity:h[d].baseOpacity,depthWrite:!1,blending:H})},d))})}function vt(p){const n=new gt(p,3),r=n.attributes.position;for(let h=0;h<r.count;h++){let y=r.getX(h),d=r.getY(h),s=r.getZ(h);const u=Math.sqrt(y*y+d*d+s*s),o=y/u,t=d/u,l=s/u;if(d*=1.25,l<-.3&&(s*=.75),l>.2){const e=o- -.35,c=t-.35,g=Math.sqrt(e*e+c*c);g<.25&&(s-=(.25-g)*p*.6);const x=o-.35,j=t-.35,R=Math.sqrt(x*x+j*j);R<.25&&(s-=(.25-R)*p*.6),t>.45&&t<.65&&Math.abs(o)<.65&&(s+=p*.08),Math.abs(o)<.12&&t>-.1&&t<.4&&(s+=p*.12),Math.abs(o)<.1&&t>-.25&&t<-.05&&(s+=p*.18),Math.abs(o)<.25&&t>-.5&&t<-.3&&(s-=p*.06),Math.abs(o)>.35&&Math.abs(o)<.7&&t>-.3&&t<.2&&(s+=p*.04)}t<-.7&&l>0&&(s-=p*.05,d-=p*.08),r.setX(h,y),r.setY(h,d),r.setZ(h,s)}const i=n.toNonIndexed();return i.computeVertexNormals(),i}function Et({position:p=[0,0,0],size:n=3}){const r=f.useRef(null),i=f.useMemo(()=>vt(n),[n]);return P(h=>{r.current&&(r.current.rotation.y=Math.sin(h.clock.elapsedTime*.15)*.12,r.current.rotation.x=Math.sin(h.clock.elapsedTime*.1)*.04)}),m.jsx("mesh",{ref:r,position:p,geometry:i,children:m.jsx("meshStandardMaterial",{color:"#1a1a22",roughness:.9,metalness:.05,flatShading:!0})})}function Tt({active:p=!1,position:n=[0,0,0],radius:r=10}){const i=f.useRef(null),h=f.useRef(null),y=f.useRef([]),d=f.useRef({stripeRepeat:3,rotateY:0,rotateX:0,blinkFactor:0,glitchFactor:0,opacity:0,posY:n[1]+40}),s=f.useMemo(()=>({uStripeRepeat:{value:3},uBlinkFactor:{value:0},uGlitchFactor:{value:0},uOpacity:{value:0},uTime:{value:0}}),[]);return f.useEffect(()=>{const u=d.current,o=v.to(u,{stripeRepeat:8,duration:5,paused:!0,onComplete(){o.reverse()},onReverseComplete(){o.restart()}}),t=v.to({},{duration:J(.5,4),paused:!0,onComplete(){u.blinkFactor=1,v.delayedCall(J(.05,.15),()=>{u.blinkFactor=0}),t.duration(J(.5,4)),t.restart()}}),l=v.to({},{duration:J(2,8),paused:!0,onComplete(){u.glitchFactor=1,v.delayedCall(J(.15,.6),()=>{u.glitchFactor=0}),l.duration(J(2,8)),l.restart()}}),a=v.to(u,{posY:n[1],opacity:1,duration:1.5,paused:!0,ease:"power2.out"});return y.current=[o,t,l,a],()=>{y.current.forEach(w=>w.kill())}},[]),f.useEffect(()=>{const[u,o,t,l]=y.current;p?(l?.play(),u?.resume(),o?.resume(),t?.resume()):(u?.pause(),o?.pause(),t?.pause(),l?.reverse())},[p]),P((u,o)=>{const t=d.current,l=i.current;l&&(t.rotateY+=.01,t.rotateX+=.02,l.rotation.y=t.rotateY,l.rotation.x=t.rotateX,l.position.y=t.posY,l.position.x=n[0],l.position.z=n[2],s.uStripeRepeat.value=t.stripeRepeat,s.uBlinkFactor.value=t.blinkFactor,s.uGlitchFactor.value=t.glitchFactor,s.uOpacity.value=t.opacity,s.uTime.value+=o)}),m.jsxs("mesh",{ref:i,children:[m.jsx("sphereGeometry",{args:[r,32,32]}),m.jsx("shaderMaterial",{ref:h,uniforms:s,transparent:!0,depthWrite:!1,vertexShader:`
          varying vec2 vUv;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float uStripeRepeat;
          uniform float uBlinkFactor;
          uniform float uGlitchFactor;
          uniform float uOpacity;
          uniform float uTime;
          varying vec2 vUv;
          varying vec3 vNormal;

          // Simple hash noise
          float hash(vec2 p) {
            return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
          }

          void main() {
            // Stripe pattern (like 2015 texture-ball.png)
            float stripe = step(0.5, fract(vUv.y * uStripeRepeat));
            float base = mix(0.15, 0.9, stripe);

            // Fresnel edge glow
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);

            // Blink: invert colors
            float color = mix(base, 1.0 - base, uBlinkFactor);

            // Glitch: noise overlay
            float noise = hash(vUv * 50.0 + uTime * 10.0);
            color = mix(color, noise, uGlitchFactor);

            color += fresnel * 0.3;

            gl_FragColor = vec4(vec3(color), uOpacity);
          }
        `})]})}function Ot({active:p=!1,position:n=[0,-15,0],divisionsX:r=50,divisionsY:i=50,divisionSize:h=1.5,color:y="#ffffff",opacity:d=.25}){const s=f.useRef(null),u=n[1]+40,o=f.useRef({yPos:u,targetY:n[1],time:0}),t=f.useMemo(()=>new N(r*h,i*h,r,i),[r,i,h]),l=f.useMemo(()=>new Float32Array(t.attributes.position.array),[t]);return f.useEffect(()=>{const a=o.current;p?v.to(a,{yPos:a.targetY,duration:1.5,ease:"power2.out"}):v.to(a,{yPos:a.targetY+40,duration:1,ease:"power2.in"})},[p]),P((a,w)=>{const e=s.current;if(!e)return;const c=o.current;c.time+=w*2,e.position.y=c.yPos;const g=t.attributes.position.array,x=r+1,j=i+1;let R=0;for(let F=0;F<x;F++)for(let M=0;M<j;M++){const b=Math.sin((F+1+c.time)*.2)*2+Math.sin((M+1+c.time)*.2)*5;g[R*3+2]=l[R*3+2]+b,R++}t.attributes.position.needsUpdate=!0,t.computeVertexNormals()}),m.jsx("mesh",{ref:s,geometry:t,position:[n[0],u,n[2]],rotation:[-Math.PI/2,0,0],children:m.jsx("meshBasicMaterial",{color:y,wireframe:!0,transparent:!0,opacity:d,side:Q,depthWrite:!1,blending:H})})}function Gt({active:p=!1,position:n=[0,0,0],count:r=6,color:i="#ffffff",amplitude:h=2}){const y=f.useRef(null),d=f.useRef([]),s=at(ct,"/texture-drop.png"),u=f.useMemo(()=>Array.from({length:r},(o,t)=>({scale:.1,opacity:0,maxScale:(t+1)*h/r,zOffset:(r-t)*5,zPos:(r-t)*5})),[r,h]);return f.useEffect(()=>{const o=u.map((t,l)=>{const a=v.to(t,{scale:t.maxScale,opacity:0,duration:1.5,delay:l*100/1e3,paused:!0,ease:"power1.out",onComplete(){t.scale=.1,t.opacity=1,a.restart()}});return a});return d.current=o,()=>{o.forEach(t=>t.kill())}},[u]),f.useEffect(()=>{p?(d.current.forEach(o=>o.resume()),u.forEach((o,t)=>{const l=(10+t)/10;v.to(o,{zPos:0,duration:l,ease:"power2.out"})})):(d.current.forEach(o=>o.pause()),u.forEach((o,t)=>{const l=(10+t)/10;v.to(o,{zPos:o.zOffset,duration:l,ease:"power2.in"})}))},[p,u]),P(()=>{const o=y.current;o&&o.children.forEach((t,l)=>{if(l<u.length){const a=u[l];t.scale.set(a.scale,a.scale,a.scale);const w=t.material;w&&(w.opacity=a.opacity),t.position.z=a.zPos}})}),m.jsx("group",{ref:y,position:n,children:u.map((o,t)=>m.jsxs("mesh",{children:[m.jsx("planeGeometry",{args:[20,20]}),m.jsx("meshBasicMaterial",{map:s,color:i,transparent:!0,opacity:0,depthWrite:!1,depthTest:!0,blending:H,side:Q})]},t))})}function it(p,n){return p+Math.random()*(n-p)}const Pt=[{x:10,y:8,z:-5,height:15,width:2,cubeSize:.5,color:"#808080",delay:.2},{x:0,y:5,z:0,height:15,width:4,cubeSize:1,color:"#ffffff",delay:.1},{x:-12,y:10,z:-10,height:15,width:2,cubeSize:.5,color:"#4c4c4c",delay:.4}];function kt({active:p=!1,position:n=[0,0,0],beams:r=Pt}){const i=f.useRef([]),h=f.useRef(!1),[y,d,s]=at(ct,["/texture-laserBody.png","/texture-laserCap.png","/texture-laserFlare.png"]),u=f.useMemo(()=>r.map(t=>({y:t.height/2+t.width/2,flareScale:1,flareOpacity:1,movingFlareY:0,movingFlareScale:3,movingFlareOpacity:1,bodyOpacity:1})),[r]),o=f.useMemo(()=>r.map(t=>{const l=new T(t.color),a=t.height,w=t.width,e={side:Q,depthWrite:!1,depthTest:!0,transparent:!0,opacity:1,blending:H},c=new W({...e,map:y,color:l}),g=new W({...e,map:d,color:l}),x=new W({...e,map:s,color:l}),j=new W({...e,map:s,color:l}),R=new W({...e,color:l}),F=new dt({color:l}),M=new N(w,a,1,1),b=M.getAttribute("position");b.setY(2,a/2+w/2),b.setY(3,a/2+w/2),b.needsUpdate=!0,M.computeBoundingSphere();const z=new Y(M,c),A=new N(w,w),S=new Y(A,g);S.position.y=a/2+w/2;const E=new Y(A.clone(),g);E.position.y=-(a/2)-w/2,E.rotation.z=Math.PI;const O=new N(10,10),B=new Y(O,x);B.position.y=-(a/2)-w/2;const C=new K,G=new Float32Array([0,a/2+w/2,0,0,a/2+w/2,0]);C.setAttribute("position",new tt(G,3));const k=new mt(C,F),Z=new wt(t.cubeSize,t.cubeSize,t.cubeSize),_=new Y(Z,R),X=new N(10,40),$=new Y(X,j);$.scale.x=3;const D=new et;D.add(_),D.add($);const L=new et;L.position.set(t.x,t.y,t.z);const q=new et;q.add(z),q.add(S),q.add(E);const rt=new et;return rt.add(q),L.add(k),L.add(rt),L.add(B),L.add(D),{group:L,bodyGeo:M,lineGeo:C,bodyMat:c,capMat:g,flareMat:x,movingFlareMat:j,capBot:E,flareMesh:B,cubeGroup:D}}),[r,y,d,s]);return f.useEffect(()=>{const t=[];return u.forEach(l=>{t.push(v.to(l,{flareScale:2,flareOpacity:.6,duration:it(1,2),paused:!0,yoyo:!0,repeat:-1,ease:"sine.inOut"})),t.push(v.to(l,{movingFlareY:30,movingFlareScale:1,movingFlareOpacity:0,duration:it(2,6),paused:!0,yoyo:!0,repeat:-1,ease:"sine.inOut"})),t.push(v.to(l,{bodyOpacity:.5,duration:it(1,2),paused:!0,yoyo:!0,repeat:-1,ease:"sine.inOut"}))}),i.current=t,()=>{t.forEach(l=>l.kill())}},[u]),f.useEffect(()=>{p&&!h.current?(u.forEach((t,l)=>{v.to(t,{y:-5,duration:1,delay:r[l].delay,ease:"power2.out"})}),i.current.forEach(t=>t.resume()),h.current=!0):!p&&h.current&&(i.current.forEach(t=>t.pause()),u.forEach((t,l)=>{v.to(t,{y:-70,duration:1,delay:r[l].delay*.5,ease:"power2.in"})}),h.current=!1)},[p,u,r]),P(()=>{o.forEach((t,l)=>{const a=u[l],w=r[l].width,e=t.bodyGeo.getAttribute("position");e.setY(2,a.y),e.setY(3,a.y),e.needsUpdate=!0,t.bodyGeo.computeBoundingSphere();const c=a.y-w/2;t.capBot.position.y=c,t.flareMesh.position.y=c,t.cubeGroup.position.y=c;const g=t.lineGeo.getAttribute("position");g.setY(1,c),g.needsUpdate=!0,t.flareMesh.scale.set(a.flareScale,a.flareScale,1),t.flareMat.opacity=a.flareOpacity;const x=t.cubeGroup.children[1];x&&(x.position.y=a.movingFlareY,x.scale.x=a.movingFlareScale,t.movingFlareMat.opacity=a.movingFlareOpacity),t.bodyMat.opacity=a.bodyOpacity,t.capMat.opacity=a.bodyOpacity})}),m.jsx("group",{position:n,children:o.map((t,l)=>m.jsx("primitive",{object:t.group},l))})}function ut(p,n,r){const i=Math.sin(p*12.9898+n*78.233+r*43.7585)*43758.5453;return i-Math.floor(i)}function Ct(p,n,r,i){const h=(p+1)*(n+1),y=new Float32Array(h);for(let d=0;d<=n;d++)for(let s=0;s<=p;s++){const u=s/p,o=d/n,t=ut(u*3,o*3,r)*.6+ut(u*7,o*7,r+100)*.25+ut(u*13,o*13,r+200)*.15;y[d*(p+1)+s]=t*i}return y}function Bt({position:p=[0,0,0],active:n=!0,divisionsX:r=30,divisionsY:i=30,size:h=50,amplitude:y=8,fromColor:d="#4c4c4c",toColor:s="#ffffff",mapCount:u=4}){const o=f.useRef(null),t=f.useRef(null),l=f.useRef(null),a=f.useRef(0),w=f.useRef(null),e=f.useMemo(()=>new T(d),[d]),c=f.useMemo(()=>new T(s),[s]),g=f.useMemo(()=>{const M=[];for(let b=0;b<u;b++)M.push(Ct(r,i,b*17+42,y));return M},[r,i,y,u]),x=f.useMemo(()=>{const M=[],b=h/2,z=h/2,A=h/r,S=h/i;for(let E=0;E<=i;E++)for(let O=0;O<r;O++){const B=-b+O*A,C=-b+(O+1)*A,G=-z+E*S;M.push(B,G,0),M.push(C,G,0)}return new Float32Array(M)},[r,i,h]),j=f.useMemo(()=>{const M=x.length/3,b=new Float32Array(M*3);for(let z=0;z<M;z++)b[z*3]=e.r,b[z*3+1]=e.g,b[z*3+2]=e.b;return b},[x,e]),R=(M,b,z)=>{let A=0;const S=new T;for(let E=0;E<=i;E++)for(let O=0;O<r;O++){const B=E*(r+1)+O,C=E*(r+1)+O+1,G=z[B],k=z[C];M[A*3+2]=G;const Z=Math.min(1,Math.max(0,G/y));S.copy(e).lerp(c,Z),b[A*3]=S.r,b[A*3+1]=S.g,b[A*3+2]=S.b,A++,M[A*3+2]=k;const _=Math.min(1,Math.max(0,k/y));S.copy(e).lerp(c,_),b[A*3]=S.r,b[A*3+1]=S.g,b[A*3+2]=S.b,A++}},F=M=>{const b=w.current??g[0],z=g[M];l.current?.kill(),l.current=v.to({factor:1},{factor:0,duration:1.5,ease:"elastic.out(1, 0.5)",onUpdate:function(){const A=this.targets()[0].factor,S=t.current;if(!S)return;const E=S.getAttribute("position"),O=S.getAttribute("color"),B=E.array,C=O.array,G=new T;let k=0;for(let Z=0;Z<=i;Z++)for(let _=0;_<r;_++){const X=Z*(r+1)+_,$=Z*(r+1)+_+1,D=z[X]+(b[X]-z[X])*A,L=z[$]+(b[$]-z[$])*A;B[k*3+2]=D;const q=Math.min(1,Math.max(0,D/y));G.copy(e).lerp(c,q),C[k*3]=G.r,C[k*3+1]=G.g,C[k*3+2]=G.b,k++,B[k*3+2]=L;const rt=Math.min(1,Math.max(0,L/y));G.copy(e).lerp(c,rt),C[k*3]=G.r,C[k*3+1]=G.g,C[k*3+2]=G.b,k++}E.needsUpdate=!0,O.needsUpdate=!0}}),w.current=z};return f.useEffect(()=>{if(!n){l.current?.kill();return}const M=t.current;if(M){const S=M.getAttribute("position"),E=M.getAttribute("color");R(S.array,E.array,g[a.current]),S.needsUpdate=!0,E.needsUpdate=!0,w.current=g[a.current]}const b=()=>{a.current=(a.current+1)%g.length,F(a.current)},z=setInterval(b,3e3+Math.random()*2e3),A=setTimeout(b,800);return()=>{clearInterval(z),clearTimeout(A),l.current?.kill()}},[n]),P((M,b)=>{o.current&&(o.current.rotation.z+=b*.03)}),m.jsx("group",{ref:o,position:p,rotation:[-Math.PI/2.5,0,0],children:m.jsxs("lineSegments",{frustumCulled:!1,children:[m.jsxs("bufferGeometry",{ref:t,children:[m.jsx("bufferAttribute",{attach:"attributes-position",args:[x.slice(),3],count:x.length/3,itemSize:3}),m.jsx("bufferAttribute",{attach:"attributes-color",args:[j.slice(),3],count:j.length/3,itemSize:3})]}),m.jsx("lineBasicMaterial",{vertexColors:!0,transparent:!0,opacity:.85})]})})}function I(p,n){return p+Math.random()*(n-p)}function It({position:p=[0,0,0],active:n=!0,count:r=5,spread:i=16,tubeWidth:h=20,color:y="#ffffff"}){const d=f.useRef(null),s=f.useRef([]),u=f.useRef(n);u.current=n;const[o,t]=at(ct,["/texture-neonGlow.png","/texture-neonProjection.png"]),l=f.useMemo(()=>new T(y),[y]),a=f.useMemo(()=>{const e=[];for(let c=0;c<r;c++){const g=new et,x=h*I(.6,1.2);g.position.set(I(-i/2,i/2),I(-2,2),I(-3,1)),g.rotation.z=I(-.15,.15);const j=new bt({color:new T("#808080"),emissive:new T("#000000")}),R=new jt(.2,.2,x,6),F=new Y(R,j);F.rotation.z=Math.PI/2,g.add(F);const M=[];for(let S=0;S<3;S++){const E=new W({map:o,color:l,transparent:!0,opacity:0,blending:H,side:Q,depthWrite:!1,depthTest:!0});M.push(E);const O=new N(x+3,5),B=new Y(O,E);B.rotation.x=S*.7*Math.PI,g.add(B)}const b=new W({map:t,color:l,transparent:!0,opacity:0,blending:H,side:Q,depthWrite:!1,depthTest:!0}),z=new N(x*2,50),A=new Y(z,b);A.position.z=-1,g.add(A),e.push({group:g,tubeMat:j,glowMats:M,projMat:b,tweens:[]})}return e},[r,i,h,l,o,t]);f.useEffect(()=>{s.current=a},[a]);const w=f.useCallback(e=>{const c={glowOp:.4,projOp:.08},g=v.to(c,{glowOp:.7,projOp:.15,duration:I(.8,5),yoyo:!0,repeat:-1,ease:"sine.inOut",onUpdate(){e.glowMats.forEach(R=>{R.opacity=c.glowOp}),e.projMat.opacity=c.projOp}});e.tweens.push(g);const x=()=>{if(!u.current)return;e.glowMats.forEach(F=>{F.opacity=0}),e.projMat.opacity=0,e.tubeMat.emissive.setHex(0),v.delayedCall(I(.05,.1),()=>{u.current&&(e.tubeMat.emissive.copy(new T(y)),e.glowMats.forEach(F=>{F.opacity=.4}),e.projMat.opacity=.08)});const R=v.delayedCall(I(3,10),x);e.tweens.push(R)},j=v.delayedCall(I(1,4),x);e.tweens.push(j)},[y]);return f.useEffect(()=>{if(!n){a.forEach(e=>{e.tweens.forEach(c=>c.kill()),e.tweens=[],e.tubeMat.emissive.setHex(0),e.glowMats.forEach(c=>{c.opacity=0}),e.projMat.opacity=0});return}return a.forEach((e,c)=>{const g=c*I(.15,.4),x=Math.floor(I(3,6)),j=v.timeline({delay:g});for(let R=0;R<x;R++){const F=I(.05,.07);j.call(()=>{e.tubeMat.emissive.copy(new T(y)),e.glowMats.forEach(M=>{M.opacity=.3}),e.projMat.opacity=.05}),j.to({},{duration:F}),j.call(()=>{e.tubeMat.emissive.setHex(0),e.glowMats.forEach(M=>{M.opacity=0}),e.projMat.opacity=0}),j.to({},{duration:I(.05,.1)})}j.call(()=>{e.tubeMat.emissive.copy(new T(y)),e.glowMats.forEach(R=>{R.opacity=.4}),e.projMat.opacity=.08,w(e)}),e.tweens.push(j)}),()=>{a.forEach(e=>{e.tweens.forEach(c=>c.kill()),e.tweens=[]})}},[n,a,y,w]),P((e,c)=>{if(!d.current)return;const g=performance.now()*.001;a.forEach((x,j)=>{x.group.position.y+=Math.sin(g*.5+j)*.001*c*60})}),m.jsx("group",{ref:d,position:p,children:a.map((e,c)=>m.jsx("primitive",{object:e.group},c))})}function ot(p,n){return p+Math.random()*(n-p)}function Ut({position:p=[0,0,0],active:n=!0,divisionsX:r=11,divisionsY:i=11,divisionSize:h=4,fromColor:y="#ffffff",toColor:d="#0a0a0a"}){const s=f.useRef(null),u=f.useRef([]),o=(r-1)*h,t=(i-1)*h,l=f.useMemo(()=>new T(y),[y]),a=f.useMemo(()=>new T(d),[d]),w=f.useMemo(()=>{const e=[];for(let c=0;c<r;c++){const g=c*h-o/2,x=new V(g,0,0),j=new V(g,t/2,0),R=new V(g,-t/2,0),F=new Float32Array([x.x,x.y,x.z,x.x,x.y,x.z,x.x,x.y,x.z]),M=new Float32Array(9),b=Math.abs(g/o),z=l.clone().lerp(a,b+.2);M[0]=a.r,M[1]=a.g,M[2]=a.b,M[3]=z.r,M[4]=z.g,M[5]=z.b,M[6]=a.r,M[7]=a.g,M[8]=a.b;const A=new K,S=new tt(F,3);A.setAttribute("position",S),A.setAttribute("color",new tt(M,3)),e.push({geometry:A,startTarget:{x:R.x,y:R.y,z:R.z},endTarget:{x:j.x,y:j.y,z:j.z},posAttr:S})}for(let c=0;c<i;c++){const g=c*h-t/2,x=new V(0,g,0),j=new V(-o/2,g,0),R=new V(o/2,g,0),F=new Float32Array([x.x,x.y,x.z,x.x,x.y,x.z,x.x,x.y,x.z]),M=new Float32Array(9),b=Math.abs(g/t),z=l.clone().lerp(a,b+.2);M[0]=a.r,M[1]=a.g,M[2]=a.b,M[3]=z.r,M[4]=z.g,M[5]=z.b,M[6]=a.r,M[7]=a.g,M[8]=a.b;const A=new K,S=new tt(F,3);A.setAttribute("position",S),A.setAttribute("color",new tt(M,3)),e.push({geometry:A,startTarget:{x:j.x,y:j.y,z:j.z},endTarget:{x:R.x,y:R.y,z:R.z},posAttr:S})}return e},[r,i,h,o,t,l,a]);return f.useEffect(()=>{if(!n){u.current.forEach(e=>e.pause());return}return u.current.forEach(e=>e.kill()),u.current=[],w.forEach(e=>{const c=e.posAttr.array,g={x:c[0],y:c[1],z:c[2]},x=v.to(g,{x:e.startTarget.x,y:e.startTarget.y,z:e.startTarget.z,duration:ot(1,2.5),delay:ot(0,2),yoyo:!0,repeat:-1,ease:"power1.inOut",onUpdate:()=>{c[0]=g.x,c[1]=g.y,c[2]=g.z,e.posAttr.needsUpdate=!0}}),j={x:c[6],y:c[7],z:c[8]},R=v.to(j,{x:e.endTarget.x,y:e.endTarget.y,z:e.endTarget.z,duration:ot(1,2.5),delay:ot(0,2),yoyo:!0,repeat:-1,ease:"power1.inOut",onUpdate:()=>{c[6]=j.x,c[7]=j.y,c[8]=j.z,e.posAttr.needsUpdate=!0}});u.current.push(x,R)}),()=>{u.current.forEach(e=>e.kill()),u.current=[]}},[n,w]),P((e,c)=>{s.current&&(s.current.rotation.z+=c*.015)}),m.jsx("group",{ref:s,position:p,children:w.map((e,c)=>m.jsx("lineSegments",{geometry:e.geometry,frustumCulled:!1,children:m.jsx("lineBasicMaterial",{vertexColors:!0,transparent:!0,opacity:.6})},c))})}function ft(p,n){return p+Math.random()*(n-p)}function pt(p,n,r,i,h){return i+(p-n)/(r-n)*(h-i)}function Yt({position:p=[0,0,0],active:n=!0,ringCount:r=5,ringDivisions:i=100}){const h=f.useRef(null),y=f.useRef(null),d=f.useRef([]),s=f.useRef(null),u=f.useRef(0),o=f.useMemo(()=>[4,6,10,15,19].slice(0,r),[r]),t=f.useMemo(()=>[{radius:4,scale:.15,color:"#ffffff",speed:.03},{radius:6,scale:.08,color:"#4c4c4c",speed:.025},{radius:10,scale:.35,color:"#4c4c4c",speed:.018},{radius:15,scale:.5,color:"#ffffff",speed:.01},{radius:19,scale:.3,color:"#000000",speed:.04}].slice(0,r),[r]),l=f.useMemo(()=>{const w=[],e=2*Math.PI/i;for(let F=0;F<=i;F++){const M=F*e;w.push(Math.cos(M),Math.sin(M),0)}const c=new K;c.setAttribute("position",new st(w,3));const g=new T("#ffffff"),x=new T("#333333"),j=[],R=30;for(let F=0;F<=i;F++){const M=F%R,b=pt(M,0,R,0,1),z=g.clone().lerp(x,b);j.push(z.r,z.g,z.b)}return c.setAttribute("color",new st(j,3)),c},[i]),a=f.useMemo(()=>{const w=new Rt(1,16,16);return t.map(e=>{const c=new W({color:new T(e.color),transparent:!0,opacity:.9}),g=new Y(w,c),x=ft(0,2*Math.PI);return g.position.set(e.radius*Math.cos(x),e.radius*Math.sin(x),0),g.scale.setScalar(e.scale),{mesh:g,radius:e.radius,theta:x,speed:e.speed}})},[t]);return f.useEffect(()=>{d.current=a},[a]),f.useEffect(()=>{if(!n){y.current?.kill();return}return y.current=v.to(u,{current:i,duration:20,repeat:-1,ease:"none"}),()=>{y.current?.kill()}},[n,i]),P((w,e)=>{if(n){if(d.current.forEach(c=>{c.theta-=c.speed,c.mesh.position.x=c.radius*Math.cos(c.theta),c.mesh.position.y=c.radius*Math.sin(c.theta)}),s.current){const c=s.current.geometry.getAttribute("color"),g=c.array,x=c.count,j=new T("#ffffff"),R=new T("#333333"),F=30,M=Math.floor(u.current)%i;for(let b=0;b<x;b++){const z=(b+M)%F,A=pt(z,0,F,0,1),S=j.clone().lerp(R,A);g[b*3]=S.r,g[b*3+1]=S.g,g[b*3+2]=S.b}c.needsUpdate=!0}h.current&&(h.current.rotation.z+=e*.01)}}),m.jsxs("group",{ref:h,position:p,rotation:[-1,.2,0],children:[o.map((w,e)=>{const c=l.clone(),g=new dt({vertexColors:!0,transparent:!0,opacity:.5}),x=new mt(c,g);return x.scale.set(w,w,w),x.rotation.z=ft(0,Math.PI),m.jsx("primitive",{ref:e===0?j=>{s.current=j}:void 0,object:x},`ring-${e}`)}),a.map((w,e)=>m.jsx("primitive",{object:w.mesh},`planet-${e}`))]})}const nt=8,ht=8;function Lt({yOffset:p=0,layers:n=10,opacity:r=.12,active:i=!0}){const h=f.useRef(null),y=at(ct,"/sprite-smoke.png"),d=f.useMemo(()=>{const o=[{x:10.7,y:3.9,z:17.8,rotZ:2.7,scale:5.5},{x:-2.8,y:2.6,z:-11,rotZ:.7,scale:9},{x:13,y:19.5,z:-1.3,rotZ:2,scale:4},{x:-12,y:-5,z:8,rotZ:1.2,scale:7},{x:5,y:8,z:-6,rotZ:3.5,scale:6},{x:-8,y:-3,z:14,rotZ:.4,scale:8},{x:15,y:-8,z:-4,rotZ:1.8,scale:5},{x:-15,y:12,z:5,rotZ:2.2,scale:6.5},{x:0,y:-10,z:10,rotZ:.9,scale:7.5},{x:8,y:15,z:-8,rotZ:3.1,scale:5.5}],t=[];for(let l=0;l<n;l++){const a=o[l];t.push({x:a?.x??(Math.random()-.5)*40,y:(a?.y??(Math.random()-.5)*25)+p,z:a?.z??(Math.random()-.5)*30,rotZ:a?.rotZ??Math.random()*Math.PI,scale:a?.scale??3+Math.random()*6,driftSpeed:.015+Math.random()*.025,driftPhase:Math.random()*Math.PI*2,rotSpeed:(Math.random()-.5)*.06})}return t},[n,p]),s=f.useMemo(()=>d.map((o,t)=>{const l=y.clone();l.needsUpdate=!0,l.flipY=!1,l.repeat.set(1/nt,1/ht),l.minFilter=lt,l.magFilter=lt;const a=(t*7+3)%64,w=a%nt,e=Math.floor(a/nt);return l.offset.set(w/nt,1-(e+1)/ht),new W({map:l,transparent:!0,opacity:r*(.7+Math.random()*.6),depthWrite:!1,depthTest:!0,blending:H,color:o.z>0?new T("#555555"):new T("#ffffff"),side:Q})}),[d,y,r]),u=f.useMemo(()=>new N(10,10),[]);return P((o,t)=>{if(!i||!h.current)return;const l=performance.now()*.001;h.current.children.forEach((a,w)=>{const e=d[w];if(!e)return;const c=a;c.rotation.z+=e.rotSpeed*t,c.position.x=e.x+Math.sin(l*e.driftSpeed+e.driftPhase)*2,c.position.y=e.y+Math.cos(l*e.driftSpeed*.7+e.driftPhase)*1.2;const g=.85+Math.sin(l*.3+e.driftPhase)*.15;s[w].opacity=r*(.7+w%3*.2)*g})}),m.jsx("group",{ref:h,children:d.map((o,t)=>m.jsx("mesh",{geometry:u,material:s[t],position:[o.x,o.y,o.z],rotation:[0,0,o.rotZ],scale:[o.scale,o.scale,1]},t))})}const Wt=450,Zt=50;function U(p,n,r=28){const i=Math.abs(p-n);return i>r?0:1-i/r}function _t({scrollProgress:p}){const{camera:n}=Mt(),r=f.useRef(0),i=f.useRef(0);return f.useEffect(()=>{i.current=-p*Wt},[p]),P((h,y)=>{const d=1-Math.exp(-3*y);r.current+=(i.current-r.current)*d;const s=Math.sin(r.current*.004)*.6,u=Math.cos(performance.now()*.002)*.02;n.position.set(s,r.current+u,40),n.lookAt(0,r.current,0)}),null}function Nt(p){const n=Zt,r=f.useRef({}),i=f.useRef(null),h=f.useRef(0);return P(({camera:y})=>{const d=y.position.y;r.current={sec0:U(d,0),sec1:U(d,-1*n),sec2:U(d,-2*n),sec3:U(d,-3*n),sec4:U(d,-4*n),sec5:U(d,-5*n),sec6:U(d,-6*n),sec7:U(d,-7*n),sec8:U(d,-8*n)};const s=U(d,-7*n,30);if(h.current+=(s-h.current)*.06,i.current){const u=Math.max(h.current,.001);i.current.scale.setScalar(u)}}),m.jsxs(m.Fragment,{children:[m.jsx(kt,{position:[0,-1*n,0],active:(r.current.sec1??0)>.2}),m.jsx(Gt,{position:[0,-2*n,0],active:(r.current.sec2??0)>.2,count:6,amplitude:2}),m.jsx(Tt,{position:[0,-3*n,0],radius:4.5,active:(r.current.sec3??0)>.2}),m.jsx(Ut,{position:[0,-3*n-2,0],active:(r.current.sec3??0)>.2,divisionsX:10,divisionsY:10,divisionSize:3.5}),m.jsx(Bt,{position:[0,-4*n,0],active:(r.current.sec4??0)>.2,divisionsX:40,divisionsY:40,size:50,amplitude:8}),m.jsx(Ot,{position:[0,-5*n-3,0],active:(r.current.sec5??0)>.2,divisionsX:50,divisionsY:50,divisionSize:.8,opacity:.3}),m.jsx(Yt,{position:[0,-6*n,0],active:(r.current.sec6??0)>.2,ringCount:6}),m.jsx("group",{ref:i,children:m.jsx(Et,{position:[0,-7*n,0],size:4})}),m.jsx(It,{position:[0,-8*n,0],active:(r.current.sec8??0)>.2,count:5,spread:16,tubeWidth:20})]})}function qt({scrollProgress:p}){return m.jsx("div",{className:"canvas-container",children:m.jsxs(yt,{shadows:!0,camera:{position:[0,0,40],fov:22,near:.1,far:600},gl:{alpha:!1,antialias:!0},style:{background:"#0a0a0a"},children:[m.jsx("fogExp2",{attach:"fog",args:["#0a0a0a",.012]}),m.jsx("ambientLight",{intensity:.3}),m.jsx("directionalLight",{position:[5,8,10],intensity:.7,color:"#ccddff"}),m.jsx("directionalLight",{position:[-3,-2,-5],intensity:.25,color:"#8899bb"}),m.jsx("pointLight",{position:[0,0,35],intensity:.2,color:"#ffffff",distance:80}),m.jsx(_t,{scrollProgress:p}),m.jsx(St,{count:600}),m.jsx(Ft,{count:120}),m.jsx(zt,{count:500}),m.jsx(At,{}),m.jsx(Lt,{yOffset:0,layers:6,opacity:.16}),m.jsx(Nt,{scrollProgress:p})]})})}export{qt as default};
